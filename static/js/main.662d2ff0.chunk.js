(this["webpackJsonpapp-of-ice-and-fire"]=this["webpackJsonpapp-of-ice-and-fire"]||[]).push([[0],{112:function(e,a,t){},120:function(e,a,t){},125:function(e,a,t){"use strict";t.r(a);var c=t(0),r=t(20),n=t.n(r),s=(t(79),t(80),t(7)),i=t(14),l=(t(81),Object(c.createContext)()),j=t(24),d=t(61),o=t(139),b=t(138),h=t(62),O=t(69),u=t(1),p=function(){var e=Object(c.useContext)(l),a=e.dataChoice,t=e.toggleSidebar,r=e.sidebarOpen,n=e.params,p=e.changeParams,x=Object(c.useState)(""),f=Object(i.a)(x,2),g=f[0],m=f[1],v="".concat(a.charAt(0).toUpperCase()).concat(a.substring(1,a.length-1)," name:");return Object(u.jsxs)("header",{className:"header header-grid",children:[Object(u.jsx)("div",{className:"headerButton",children:Object(u.jsx)(j.a,{color:"accent",shape:"rectangle",size:"medium",variant:"primary",onClick:function(){return t()},children:r?"Hide Filters":"Show Filters"})}),Object(u.jsx)(d.a,{className:"headerTitle",textSize:"display1",children:"An app of Ice and Fire"}),Object(u.jsx)("div",{className:"headerSearch",children:Object(u.jsx)(o.a,{onSubmit:function(e){e.preventDefault(),p({page:Object(s.a)(Object(s.a)({},n.page),{},{current:1}),filters:{name:g}}),m("")},children:Object(u.jsxs)(b.a,{placeholder:v,"aria-label":"Submit",onChange:function(e){return m(e.target.value)},value:g,children:[Object(u.jsx)(h.b,{align:"left",name:"magnify-glass"}),Object(u.jsx)(O.b,{align:"right",name:"magnify-glass",type:"submit",children:"Submit"})]})})})]})},x=t(6),f=(t(112),t(134)),g=t(136),m=t(71),v=t(140),y=t(130),C=t(141),k=t(131),A=t(25),N=t(22),w=t(23),P=t(26),D=function(){var e,a=Object(c.useContext)(l),t=a.sidebarOpen,r=a.changeOption,n=a.dataChoice,d=a.params,o=a.changePage,O=a.changeParams,p=Object(c.useState)(!1),D=Object(i.a)(p,2),S=D[0],R=D[1],T=function(e){r(e),O({page:Object(s.a)(Object(s.a)({},d.page),{},{current:1}),filters:{}})},E=function(e){var a=d.filters,t=(a.name,Object(x.a)(a,["name"]));O({page:Object(s.a)(Object(s.a)({},d.page),{},{current:1}),filters:Object(s.a)(Object(s.a)({},t),e)})},z=function(e){O({page:Object(s.a)(Object(s.a)({},d.page),{},{current:1}),filters:Object(s.a)({},e)})};function I(e){var a=e.label,t=e.param,r=d.filters[t]?new Date(d.filters[t]):null,n=Object(c.useState)(null),l=Object(i.a)(n,2),j=l[0],o=l[1],h=null;r&&(h=new Intl.DateTimeFormat("default",{year:"numeric",month:"numeric",day:"numeric"}).format(r));var p=new Date("01-01-2005");return Object(u.jsx)("div",{style:{width:"100px"},children:Object(u.jsx)(f.a,{onSelect:function(e){var a=e.date;o(a)},onApply:function(){var e=d.filters;e[t]=new Date(j).toISOString(),O({page:Object(s.a)(Object(s.a)({},d.page),{},{current:1}),filters:Object(s.a)({},e)})},onCancel:function(){o(r)},selectedDate:j,calendarOpenDate:p,children:Object(u.jsx)(b.a,{label:a,value:h||"",placeholder:"dd/mm/yy",readOnly:!0})})})}switch(n){case"characters":e=Object(u.jsxs)(c.Fragment,{children:[Object(u.jsx)("div",{className:"filter-group",children:Object(u.jsx)(g.a,{placeholder:d.filters.gender?"".concat(d.filters.gender.charAt(0).toUpperCase()).concat(d.filters.gender.substring(1)):"Pick a Gender",children:Object(u.jsx)(m.b,{children:Object(u.jsxs)(v.a,{children:[Object(u.jsx)(y.a,{onClick:function(){E({gender:"female"})},selected:"female"===d.filters.gender,children:"Female"}),Object(u.jsx)(y.a,{onClick:function(){E({gender:"male"})},selected:"male"===d.filters.gender,children:"Male"}),Object(u.jsx)(y.a,{onClick:function(){var e=d.filters,a=(e.gender,Object(x.a)(e,["gender"]));z(a)},selected:!1,children:"Clear"})]})})})}),Object(u.jsx)("div",{className:"filter-group",children:Object(u.jsx)(g.a,{placeholder:d.filters.isAlive?"Alive":d.filters.hasOwnProperty("isAlive")?"Dead":"Pick a Living Status",children:Object(u.jsx)(m.b,{children:Object(u.jsxs)(v.a,{children:[Object(u.jsx)(y.a,{onClick:function(){E({isAlive:!0})},selected:!!d.filters.isAlive,children:"Alive"}),Object(u.jsx)(y.a,{onClick:function(){return E({isAlive:!1})},selected:!d.filters.isAlive&&d.filters.hasOwnProperty("isAlive"),children:"Dead"}),Object(u.jsx)(y.a,{onClick:function(){var e=d.filters,a=(e.isAlive,Object(x.a)(e,["isAlive"]));z(a)},selected:!1,children:"Clear"})]})})})})]});break;case"houses":e=Object(u.jsxs)(c.Fragment,{children:[Object(u.jsx)("div",{className:"filter-group",children:Object(u.jsx)(g.a,{placeholder:d.filters.region?d.filters.region:"Pick a Region",children:Object(u.jsx)(m.b,{children:Object(u.jsxs)(v.a,{children:[["Beyond the Wall","Dorne","Iron Islands","The Crownlands","The Neck","The North","The Reach","The Riverlands","The Stormlands","The Westerlands","The Vale"].map((function(e){return Object(u.jsx)(y.a,{onClick:function(){return E({region:e})},children:e},e)})),Object(u.jsx)(y.a,{onClick:function(){var e=d.filters,a=(e.region,Object(x.a)(e,["region"]));z(a)},selected:!1,children:"Clear"})]})})})}),Object(u.jsx)("div",{className:"filter-group",children:Object(u.jsx)(g.a,{placeholder:d.filters.hasDiedOut?"Current":d.filters.hasOwnProperty("hasDiedOut")?"Extinct":"Pick a Living Status",children:Object(u.jsx)(m.b,{children:Object(u.jsxs)(v.a,{children:[Object(u.jsx)(y.a,{onClick:function(){return E({hasDiedOut:!0})},selected:!!d.filters.hasDiedOut,children:"Current"}),Object(u.jsx)(y.a,{onClick:function(){return E({hasDiedOut:!1})},selected:!d.filters.hasDiedOut&&d.filters.hasOwnProperty("hasDiedOut"),children:"Extinct"}),Object(u.jsx)(y.a,{onClick:function(){var e=d.filters,a=(e.hasDiedOut,Object(x.a)(e,["hasDiedOut"]));z(a)},selected:!1,children:"Clear"})]})})})})]});break;case"books":e=Object(u.jsx)(c.Fragment,{children:Object(u.jsx)("div",{className:"filter-group",children:Object(u.jsxs)("div",{className:"filter-options",children:[Object(u.jsx)(I,{label:"From Release Date:",param:"fromReleaseDate"}),Object(u.jsx)(I,{label:"To Release Date:",param:"toReleaseDate"}),Object(u.jsx)("br",{}),Object(u.jsx)(j.a,{color:"negative",shape:"rectangle",size:"small",variant:"secondary",onClick:function(){z({})},children:"Reset"})]})})})}var L=t?"app-sidebar expanded":"app-sidebar collapsed",F=S?"":"collapsed";return Object(u.jsxs)("div",{className:"sidebar ".concat(L),children:["Fetch:",Object(u.jsxs)(C.a,{children:[Object(u.jsx)(k.a,{name:"data",onClick:function(){return T("characters")},checked:"characters"===n,readOnly:!0,children:"Characters"}),Object(u.jsx)(k.a,{name:"data",onClick:function(){return T("houses")},checked:"houses"===n,readOnly:!0,children:"Houses"}),Object(u.jsx)(k.a,{name:"data",onClick:function(){return T("books")},checked:"books"===n,readOnly:!0,children:"Books"})]}),Object(u.jsxs)("div",{className:"dropdown",children:[Object(u.jsx)("span",{children:"Results per page:"}),Object(u.jsxs)(A.a,{children:[Object(u.jsx)(N.b,{children:Object(u.jsx)(b.a,{isTarget:!0,type:"number",onChange:function(){},value:d.page.size,children:Object(u.jsx)(h.b,{name:"chevron-down"})})}),Object(u.jsx)(w.b,{children:Object(u.jsx)(P.a,{children:Object(u.jsx)(v.a,{children:[5,10,15,20,25,50].map((function(e){return Object(u.jsx)(y.a,{onClick:function(){return o(Object(s.a)(Object(s.a)({},d.page),{},{current:1,size:e}))},selected:d.page.size===e,children:e},e)}))})})})]})]}),Object(u.jsxs)("div",{className:"data-filters",children:[Object(u.jsx)(j.a,{color:"accent",shape:"rectangle",size:"small",variant:"secondary",onClick:function(){R(!S)},children:F?"More filters":"Less filters"}),Object(u.jsx)("div",{className:F,children:e})]})]})},S=(t(120),t(49)),R=t(137),T=(t(60),t(72)),E=t(63),z=t(132),I=t(133),L=t(135),F=function(e){var a,t=e.character,c=e.params,r=t.name,n=t.aliases,s=t.gender,i=t.culture,l=t.playedBy;return c.hasOwnProperty("isAlive")&&(a=c.isAlive),Object(u.jsx)(T.a,{className:"card",borderRadius:"large",shade:"shade-3",size:"medium",shadow:!0,border:!0,children:Object(u.jsxs)(E.a,{children:[r&&Object(u.jsx)(d.a,{textStrong:!0,children:r}),Object(u.jsxs)(z.a,{style:"none",children:[Object(u.jsx)("hr",{}),n&&Object(u.jsxs)(I.a,{children:[Object(u.jsx)("b",{children:"AKA:"})," ",Object(u.jsx)("i",{children:n[0]})]}),s&&Object(u.jsxs)(I.a,{children:[Object(u.jsx)("b",{children:"Gender:"})," ",Object(u.jsx)("i",{children:s})]}),i&&Object(u.jsxs)(I.a,{children:[Object(u.jsx)("b",{children:"Culture:"})," ",Object(u.jsx)("i",{children:i})]}),l&&Object(u.jsxs)(I.a,{children:[Object(u.jsx)("b",{children:"Played By:"})," ",Object(u.jsx)("i",{children:l})]}),a&&Object(u.jsx)(L.a,{color:"terra-form",children:"Is Alive"})]})]})})},G=function(e){var a=e.house,t=a.name,c=a.region,r=a.seats;return Object(u.jsx)(T.a,{className:"card",borderRadius:"large",shade:"shade-3",size:"medium",shadow:!0,border:!0,children:Object(u.jsxs)(E.a,{children:[t&&Object(u.jsx)(d.a,{textStrong:!0,children:t}),Object(u.jsxs)(z.a,{style:"none",children:[Object(u.jsx)("hr",{}),c&&Object(u.jsxs)(I.a,{children:[Object(u.jsx)("b",{children:"Region:"})," ",Object(u.jsx)("i",{children:c})]}),r&&Object(u.jsxs)(I.a,{children:[Object(u.jsx)("b",{children:"Seats:"})," ",Object(u.jsx)("i",{children:r})]})]})]})})},B=function(e){var a=e.book,t=a.name,c=a.authors,r=a.publisher,n=a.mediaType,s=a.numberOfPages,i=a.country,l=a.released;return Object(u.jsx)(T.a,{className:"card",borderRadius:"large",shade:"shade-3",size:"medium",shadow:!0,border:!0,children:Object(u.jsxs)(E.a,{children:[t&&Object(u.jsx)(d.a,{textStrong:!0,children:t}),Object(u.jsxs)(z.a,{style:"none",children:[Object(u.jsx)("hr",{}),c&&Object(u.jsxs)(I.a,{children:[Object(u.jsx)("b",{children:"By:"})," ",Object(u.jsx)("i",{children:c[0]})]}),r&&Object(u.jsxs)(I.a,{children:[Object(u.jsx)("b",{children:"Publisher:"})," ",Object(u.jsx)("i",{children:r})]}),n&&Object(u.jsxs)(I.a,{children:[Object(u.jsx)("b",{children:"Media Type:"})," ",Object(u.jsx)("i",{children:n})]}),s&&Object(u.jsxs)(I.a,{children:[Object(u.jsx)("b",{children:"Number of Pages:"})," ",Object(u.jsx)("i",{children:s})]}),l&&Object(u.jsxs)(I.a,{children:[Object(u.jsx)("b",{children:"Release Date:"}),Object(u.jsx)("i",{children:new Date(l).toLocaleDateString()})]}),i&&Object(u.jsxs)(I.a,{children:[Object(u.jsx)("b",{children:"Country:"})," ",Object(u.jsx)("i",{children:i})]})]})]})})},_=function(){var e,a=Object(c.useContext)(l),t=a.feedResults,r=a.isLoading,n=a.dataChoice,i=a.params,j=a.pagination,d=a.changePage,o=function(e){return e.slice(e.lastIndexOf("/",e.lastIndexOf("/")-1)+1)};switch(n){case"characters":e=Array.isArray(t)&&t.map((function(e){return Object(u.jsx)(F,{character:e,params:i},o(e.url))}));break;case"houses":e=Array.isArray(t)&&t.map((function(e){return Object(u.jsx)(G,{house:e},o(e.url))}));break;case"books":e=Array.isArray(t)&&t.map((function(e){return Object(u.jsx)(B,{book:e},o(e.url))}));break;default:e=Object(u.jsx)("div",{children:"No Results"})}var b=r?Object(u.jsx)(S.a,{size:"large",sizeRem:"18rem",color:"white"}):Object(u.jsxs)(c.Fragment,{children:[Object(u.jsx)("div",{className:"card-list",children:e}),j&&Object(u.jsx)(R.a,{currentPage:i.page.current,onPageChange:function(e){e<=j.lastPage&&d(Object(s.a)(Object(s.a)({},i.page),{},{current:e}))},totalPages:j.lastPage})]});return Object(u.jsx)("div",{className:"feed",children:b})},H=t(40),U=t.n(H),M=t(53),J="TOGGLE_SIDEBAR",W="CHANGE_OPTION",K="TOGGLE_LOADING",V="UPDATE_RESULTS",$="UPDATE_PAGINATION",q="CHANGE_PAGE",Q="CHANGE_FILTERS",X="CHANGE_PARAMS";function Y(e,a){switch(a.type){case J:return Object(s.a)(Object(s.a)({},e),{},{sidebarOpen:!e.sidebarOpen});case W:return Object(s.a)(Object(s.a)({},e),{},{dataChoice:a.payload});case K:return Object(s.a)(Object(s.a)({},e),{},{isLoading:a.payload});case V:return Object(s.a)(Object(s.a)({},e),{},{feedResults:a.payload});case $:return Object(s.a)(Object(s.a)({},e),{},{pagination:a.payload});case q:return Object(s.a)(Object(s.a)({},e),{},{params:Object(s.a)(Object(s.a)({},e.params),{},{page:a.payload})});case Q:return Object(s.a)(Object(s.a)({},e),{},{params:Object(s.a)(Object(s.a)({},e.params),{},{filters:a.payload})});case X:return Object(s.a)(Object(s.a)({},e),{},{params:a.payload});default:return e}}function Z(e){return e.headers.get("link").split(",").reduce((function(e,a){var t=/^<(.+)>; rel="(.+)"$/.exec(a.trim());return t?(e[t[2]]=t[1],e):(console.warn("no match"),e)}),{})}var ee=function(){var e=Object(M.a)(U.a.mark((function e(a,t){var c,r,n,s,l,j,d,o,b,h,O,u,p;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.page,r=t.filters,n=c.current,s=c.size,l="https://www.anapioficeandfire.com/api/".concat(a,"?page=").concat(n,"&pageSize=").concat(s),r)for(j=0,d=Object.entries(r);j<d.length;j++)o=Object(i.a)(d[j],2),b=o[0],(h=o[1])&&(l+="&".concat(b,"=").concat(h));return e.next=6,fetch(l);case 6:return O=e.sent,u=Z(O),e.next=10,O.json();case 10:return p=e.sent,e.abrupt("return",[p,u]);case 12:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),ae=function(e){var a=Object(c.useReducer)(Y,{sidebarOpen:!0,dataChoice:"characters",feedResults:null,isLoading:!1,pagination:{},params:{page:{current:1,size:10},filters:{}}}),t=Object(i.a)(a,2),r=t[0],n=t[1],j=function(e){n({type:$,payload:e})},d=function(e){n({type:K,payload:e})};function o(e){var a=new URL(e);return Number(a.searchParams.get("page"))}var b=r.sidebarOpen,h=r.isLoading,O=r.dataChoice,p=r.feedResults,x=r.pagination,f=r.params,g=b?"grid-container":"grid-container-closed";return Object(c.useEffect)((function(){(function(){var e=Object(M.a)(U.a.mark((function e(){var a,t,c,r,l,b;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,ee(O,f);case 3:a=e.sent,t=Object(i.a)(a,2),c=t[0],r=t[1],n({type:V,payload:c}),l=o(r.last),b=Object(s.a)(Object(s.a)({},r),{},{lastPage:l}),j(b),d(!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[O,f]),Object(u.jsx)(l.Provider,{value:{sidebarOpen:b,isLoading:h,dataChoice:O,feedResults:p,pagination:x,params:f,changePage:function(e){n({type:q,payload:e})},changeParams:function(e){n({type:X,payload:e})},changeFilters:function(e){n({type:Q,payload:e})},toggleSidebar:function(){n({type:J})},changeOption:function(e){n({type:W,payload:e})}},children:Object(u.jsx)("div",{className:"app ".concat(g),children:e.children})})};var te=function(){return Object(u.jsxs)(ae,{children:[Object(u.jsx)(p,{}),Object(u.jsxs)("div",{className:"main",children:[Object(u.jsx)(D,{}),Object(u.jsx)(_,{})]})]})};n.a.render(Object(u.jsx)(te,{}),document.getElementById("root"))},60:function(e,a,t){},79:function(e,a,t){},80:function(e,a,t){},81:function(e,a,t){}},[[125,1,2]]]);
//# sourceMappingURL=main.662d2ff0.chunk.js.map